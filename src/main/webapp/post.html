<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DiceGame</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>


<script src="https://unpkg.com/mithril/mithril.js"></script>

</head>
<body>



<script>	

 
var MyPost = {
	    list: [],
	    loadList: function() {
	        return m.request({
	            method: "GET",
	            url: "_ah/api/myApi/v1/mypost/f1/f1"
	        })
	        .then(function(result) {
	            MyPost.list = result.items
	        	console.log("got:",result.items)
	        	// m.redraw(true) 
	        })
	    },
	}

var PostView = {
  oninit: MyPost.loadList,
  view: function() {
   	return m('div', [
	  m('div',{class:'subtitle'},"My Posts"),
	  m('table', {class:'table is-striped'},[
	    m('tr', [
	      m('th', {width:"20px"}, "Owner"),
	      m('th', {width:"50px"}, "Bodys"),
	      m('th', {width:"50px"}, "Like"),
	    ]),
	    MyPost.list.map(function(item) {
	      return m("tr", [
  	        m('td', m('label', item.properties.owner)),
	        m('td', m('label', item.properties.body)),
	        m('td', m('label', item.properties.likec)),
	      ])
	    })
	   ])
	 ])
  }
}

var Hello = {
   view: function() {
   	return m('div', {class:'container'}, [
           m("h1", {class: 'title'}, 'The TinyGram Post'),
           m('div',{class: 'tile is-ancestor'},[
               m("div", {class: 'tile'}, m('div',{class:'tile is-child box'},m(PostView))),
//               m("div", {class: 'tile'}, m('div',{class:'tile is-child box'},m(ScoreView))),
           ])
       ])
   }
}


m.mount(document.body, Hello)	


</script>
</body>
</html>